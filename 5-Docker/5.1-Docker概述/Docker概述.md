# 相关网站
1. Docker官网：[https://www.docker.com/](https://www.docker.com/)
2. Docker文档：[https://docs.docker.com/](https://docs.docker.com/)
3. Docker仓库：[https://hub.docker.com/](https://hub.docker.com/)
# 什么是Docker
Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从Apache2.0协议开源。 
Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机 器上，也可以实现虚拟化。 
==docker是完全使用沙箱机制形成隔离容器，各个应用互不干扰==，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。

* 沙箱机制
沙箱机制是一种用于隔离和保护应用程序的安全性的技术。它通过创建一个独立的运行环境，将应用程序及其依赖项与主机系统隔离开来，从而防止应用程序对主机系统造成不良影响。

在沙箱环境中，==应用程序运行在一个隔离的容器或虚拟机中==，这个容器或虚拟机与主机系统隔离开来，具有自己的文件系统、网络和进程空间。这样，即使应用程序存在漏洞或受到攻击，也不会对主机系统造成影响，因为容器或虚拟机提供了一个安全的隔离环境。
# Docker基本组成（Docker架构）

**核心组件=客户端+docker引擎(或守护进程或服务端)+镜像+容器+仓库**
## 1. 镜像（image）
镜像是一个只读的、可移植的打包格式，==将应用程序及其依赖项的所有信息和配置打包在一起，称为镜像。==用于创建Docker容器和运行应用程序。可看作用于创建docker容器的模版。

>Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为 运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像是==静态==的，不包含任何动态数据，其内容在构建之后也不会 被改变。

## 2. 容器（container）
* 容器是一种轻量级的虚拟化技术Docker容器是一个隔离的、可移植的运行环境，包含了应用程序及其依赖项，可以在不同的计算机上运行，提供了更高的资源利用率和更好的可移植性。==类似于一个独立的操作系统，但它们不需要模拟整个操作系统==，因此比传统的虚拟机更加轻量级，占用更少的资源。
* ==容器是基于镜像创建的、可运行的实例，是Docker应用程序的实际运行环境。,*容器 与 镜像*的关系就像是*类与对象*的关系==
## 3. 仓库（repository）
Docker仓库是一个集中存储和管理Docker镜像的地方，包括公共的Docker Hub仓库和私有的Docker仓库，用户可以在Docker仓库中搜索、下载和上传Docker镜像。

>国内的一些云服务商提供了针对 Docker Hub 的镜像服务 （ Registry Mirror ），这些镜像服务被称为加速器。常见的有 阿里云加速器、DaoCloud 加速器 等。使用加速 器会直接从国内的地址下载 Docker Hub 的镜像，比直接从 Docker Hub 下载速度会提高很多。

![[Pasted image 20230802145318.png]]


## 架构模式
Docker 使用客户端-服务器 (C/S) 架构模式，使用远程API来管理和创建Docker容器。
* 服务端：Docker守护进程，负责处理Docker指令，管理镜像、容器等
* 客户端：通过命令或RestAPI向Docker服务端发送指令。可以在本地或远程向服务端发送指令。
![[Pasted image 20230802145250.png]]
### 服务端/Docker引擎/守护进程
Docker 引擎（Docker Engine）也称为 Docker 守护进程（Docker Daemon），是 Docker 的服务端核心组件之一。Docker 引擎是一个后台进程，运行在宿主机上，==用于管理 Docker 容器、镜像和网络等资源。==它负责容器的生命周期管理，包括容器的创建、启动、停止和删除等操作，同时还提供了容器的资源管理、网络管理、存储管理等功能，并支持插件机制来扩展其功能，比如支持不同的存储后端、网络插件等。
### 客户端
Docker 客户端：是一个命令行工具，用户可以使用它与 Docker 引擎进行交互，以管理容器和镜像等资源。

# Docker的优点
1. 轻量级和快速部署：Docker容器是轻量级的，只包含应用程序及其依赖项，因此比传统的虚拟机更加轻量级，占用更少的资源，启动和部署速度更快。
    
2. 可移植性：Docker容器可以在不同的计算机和操作系统上运行，因为它们包含了应用程序及其依赖项的所有信息和配置，使得应用程序的部署和迁移更加方便。
    
3. 隔离性和安全性：Docker容器提供了隔离的运行环境，使得应用程序可以在不影响主机系统的情况下运行，从而提高了应用程序的安全性和稳定性。
    
4. 可扩展性和可管理性：Docker容器提供了易于扩展和管理的环境，可以快速地创建、启动、停止、删除和备份容器，实现快速部署和更新应用程序。
    
5. 生态系统和社区支持：Docker拥有庞大的生态系统和活跃的社区支持，在GitHub上有大量的开源项目和工具，使得应用程序的开发和部署更加简单和便捷。
# 为什么用Docker
**应用更快速的交付和部署**

Docker：打包镜像发布测试，一键运行

**更便捷的升级和扩缩容**

使用了Docker之后，我们部署应用就和搭积木一样！

项目打包为一个镜像，扩展服务器A! 服务器B

**更简单的系统运维**

在容器化之后，我们的开发，测试环境都是高度一致的。

**更高效的计算资源利用**

Docker是内核级别的虚拟化，可以在一个物理机上运行很多个容器实例！服务器的性能可以被压榨到极致。

# Docker的应用场景
Web 应用的自动化打包和发布。 
自动化测试和持续集成、发布。 
在服务型环境中部署和调整数据库或其他的后台应用。 
从头编译或者扩展现有的 OpenShi 或 Cloud Foundry 平台来搭建自己的 PaaS 环境。

>IaaS:（Infrastructure-as-a-Service）(基础设施即服务) 
>PaaS:（Platform as a Service）(平台即服务) 
>SaaS:（Software-as-a-Service）(软件即服务)
# Docker与虚拟机的对比
## 架构区别
* VM(VMware)在宿主机器、宿主机器操作系统的基础上创建虚拟层、虚拟化的操作系统、虚拟化的仓库，然后再安装应用；
* Container(Docker容器)，在宿主机器、宿主机器操作系统上创建Docker引擎，在引擎的基础上再安装应用。

>对比简述
>1. docker是一个系统进程，仅仅是封装函数库，并没有模拟完整的操作系统；虚拟机是在操作系统中**模拟**硬件设备，然后运行另一个操作系统
>2. docker体积小、启动速度快、性能好；虚拟机体积大、启动速度慢、性能一般


![[Pasted image 20230802145345.png]]

![[Pasted image 20230802145624.png]]
## 特点对比
1. 实现原理技术不同 虚拟机是⽤来进⾏硬件资源划分的完美解决⽅案，利⽤的是硬件虚拟化技术，如此VT-x 、 AMD-V会通 过⼀个 hypervisor 层来实现对资源的彻底隔离。 而容器则是操作系统级别的虚拟化，利⽤的是内核 的 Cgroup 和 Namespace 特性，此功能通过软件 来实现，仅仅是进程本身就可以实现互相隔离，不需要任何辅 助。 
2. 使⽤资源⽅⾯不同 Docker 容器与主机共享操作系统内核，不同的容器之间可以共享部分系统资源，因此更加 轻量级， 消耗的资源更少。 虚拟机会独占分配给⾃⼰的资源，不存在资源共享，各个虚拟机之间近乎完全隔 离，更加重量级，也 会消耗更多的资源。 
3. 应⽤场景不同 若需要资源的完全隔离并且不考虑资源的消耗，可以使用虚拟机。 若是想隔离进程并且需要运 行大量进程实例，应该选择 Docker 容器。

|特点|Docker容器|传统虚拟机|
|---|---|---|
|资源占用(硬盘使用)|较少(一般为MB)|较多(一般为GB)|
|启动时间和部署速度|更快(秒级)|较慢(分钟级)|
|可移植性|更高|较低|
|隔离性和安全性|软件隔离|硬件隔离|
|系统支持量|单机支持上千个容器|一般几十个|


<center>VM</center>
![[image-20200610144126122.png]]


<center>docker</center>
![[image-20200610144338073.png]]
