# Linux的7个运行级别
==注意：ubuntu中使用systemd来设置运行级别了。而/etc/inittab文件已经不在使用了==
![[Pasted image 20230720150530.png]]
进入到单用户的时候不需要密码就可以用root登录。所以在找回密码时很有用
## 基本语法
init[0/1/2/3/5/6]


## 应用实例
通过Init来切换不同 的运行级别，然后再关机
vim /etc/inittab
init 3
init 5
init 0
![[Pasted image 20230720151946.png]]

## 面试题：找回秘密
如何找回 root 密码，如果我们不小心，忘记 root 密码，怎么找回。思路： 进入到 单用户模式，然后修改 root 密码。因为进入单用户模式，root 不需要密码就可以登录。


开机->在引导时输入 回车键-> 看到一个界面输入 e -> 看到一个新的界面，选中第二行（编辑内核）在输入 e-> 在这行最后输入 1 ,再输入 回车键->再次输入 b ,这时就会进入到单用户模式。这时，我们就进入到单用户模式，使用 passwd 指令来修改 root 密码。
[ 虚拟机Linux忘记root密码的解决办法_linux虚拟机忘记root密码_雨细昆孤飞的博客-CSDN博客](https://blog.csdn.net/it_xiaoqiao/article/details/106518842?ops_request_misc=&request_id=&biz_id=102&utm_term=%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%BF%98%E8%AE%B0root%E5%AF%86%E7%A0%81&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-5-106518842.142^v90^insert_down1,239^v2^insert_chatgpt&spm=1018.2226.3001.4187)
# 帮助指令
* 当对某个指令不熟悉时，使用帮助指令来了解使用方法
* `man` 命令和 `help` 命令都是获取命令帮助信息的工具，但它们的使用方式和适用范围有所不同。`man` 命令适用于获取系统命令的帮助信息，而 `help` 命令适用于获取 shell 命令的帮助信息。
1. man获得帮助信息
man 命令
2. help
help 命令
# 文件目录类
## pwd
显示当前工作目录的绝对路径
## ls 
基本语法 ls [选项] [目录或是文件] 
* 常用选项 -a ：显示当前目录所有的文件和目录，包括隐藏的。
>👍✌️包括以`.`开头的隐藏文件。隐藏文件是以`.`开头的文件或目录，它们默认在列表中是不可见的。

> `..`和`.`是两个特殊的目录链接，它们出现在使用`ls -a`命令显示的目录列表中。
>1. 🍇`.`：表示当前目录。它是一个链接，指向当前目录本身。
>2. 🍊`..`：表示父目录。它也是一个链接，指向当前目录的上一级目录。


 * -l ：以列表的方式显示信息

==可以同时列出多个目录的具体情况，如下==
![[Pasted image 20230828210909.png]]
## cd 
基本语法 cd [参数]         切换到指定目录
* cd ~ 或者 cd ：回到自己的家目录 
* cd .. 回到当前目录的上一级目录
一个点"."表示当前目录

相对路径与绝对路径如下：

![[Pasted image 20230720163256.png]]
## mkdir：新建目录
1. 一般新建:mkdir
2. 一次创建多级目录:mkdir -p .....
![[Pasted image 20230720190240.png]]

## touch：创建空文件
touch 文件名，也可以同时创建多个文件
* 同样，可以直接touch dog/f.txt，而不用特意进入到目录里去
![[Pasted image 20230720194653.png]]
## cp：拷贝（文件或者目录）
1. 拷贝一个文件到其他目录：cp
2. cp -r ：递归复制整个文件夹：拷贝一个目录下的文件或子目录到其他目录
3. cp `-p` ：复制的文件 用于保留文件的权限和属性。
注意：==目录的使用== 
![[Pasted image 20230720201111.png]]
3. 使用细节：强制覆盖不提示的方法：\\cp
![[Pasted image 20230720201259.png]]
## rm：删除文件或目录
rm [选项] 要删除的文件或目录
* -r:递归删除整个文件夹
* -f:强制删除不提示（不写f,那么删除之前还是要提示你的）
### rm与rmdir的区别
1. rmdir只能删除空的目录，不能删除文件和非空目录(一个目录中有其他目录则也不是空的)
2. rm既能删除文件也能删除目录，无论空与否
![[Pasted image 20230720230617.png]]

>[!danger] 注意点
![[Pasted image 20230829095300.png]]

## mv：移动文件或目录以及重命名
1. 重命名
![[Pasted image 20230720231152.png]]
2. 移动
* 简单
![[Pasted image 20230720231642.png]]
* 复杂
![[Pasted image 20230720232317.png]]
## cat/more/less查看文件
### cat
1. cat [选项] 文件，只读
* -n：显示行号
* cat -n 文件 | more：more表示分页显示
### more
1. more 文件，可以分页显示
- Enter 向下n行，需要定义。默认为1行
- Ctrl+F 向下滚动一屏
- 空格键 向下滚动一屏
- Ctrl+B 返回上一屏
- = 输出当前行的行号
- ：f 输出文件名和当前行的行号
- V 调用vi编辑器
- !命令 调用Shell，并执行命令
- q 退出more
### less
功能与more类似，但是比more更加强大。less在显示文件时，不是将文件完整加载后再显示，而是根据显示来加载内容（用户操作后），打开较大文件时的速度快
- /字符串：向下搜索"字符串"的功能
- ?字符串：向上搜索"字符串"的功能
- 空格键 滚动一页
- 回车键 滚动一行
- [pagedown]： 向下翻动一页
- [pageup]： 向上翻动一页
## >与>>
1. >：输出重定向：将原来文件的内容都覆盖
2. >>：追加：不会覆盖原来文件的内容，而是追加到文件的尾部
* ls -l > a.txt，ls -l >> a.txt
* cat /etc/profile >/>> b.txt
* echo "ddd" >/>> d.txt
![[Pasted image 20230721123532.png]]
![[Pasted image 20230721123619.png]]
## echo输出内容到控制台
echo [选项] 输出内容
![[Pasted image 20230721150531.png]]
## head
head 用于显示文件的开头部分内容，默认情况下 head 指令显示文件的前10 行内容
1. head 文件 (功能描述：查看文件头 10 行内容)
2. head -n 5 文件 (功能描述：查看文件头 5 行内容，5 可以是任意行数)
![[Pasted image 20230721150831.png]]
## tail
tail 用于输出文件中尾部的内容，默认情况下 tail 指令显示文件的后10 行内容。
1. tail 文件 （功能描述：查看文件后 10 行内容）
2. tail -n 5 文件 （功能描述：查看文件后 5 行内容，5 可以是任意行数）
3. tail -f 文件 （功能描述：==实时追踪该文档的所有更新==，工作经常使用）
![[Pasted image 20230721151115.png]]
## 软链接
软链接也叫符号链接，类似于 windows 里的快捷方式，主要存放了链接其他文件的路径
1. ln -s 源文件(文件或目录) 链接文件(如果源文件是目录,连接文件也会是目录)
> [!abstract] 功能描述：给原文件创建一个软链接
2. 当我们使用 pwd 指令查看目录时，仍然看到的是软链接所在目录。
> [!warning] 
> 1. 软链接文件只是维持了从软链接到源文件的指向关系（从jys.soft->jys可以看出），不是源文件的内容，文件大小不一样容易理解
> 2. ==当用户访问这个文件时，系统会自动将其替换成其所指的文件路径==
> 3. 可以对目录进行链接

案例1：在/home 目录下创建一个软连接 linkToRoot，连接到/root 目录
![[Pasted image 20230721153832.png]]
![[Pasted image 20230721153902.png]]
案例2 删除软链接文件
![[Pasted image 20230721154003.png]]

## 硬链接
格式：ln 源文件 链接文件
![[Pasted image 20230829000108.png]]

>[!warning] 
>1.  i节点是文件和目录的唯一标识，每个文件和目录必有i节点，不然操作系统就无法识别该文件或目录，inode相同，表示指向同一个数据块
> 2.  硬链接文件和源文件i节点号相同，并且一个i节点可以对应多个文件名
>3. 删除了jys,只是删除了从920586到jys的映射关系，不影响它和jys.hard的映射关系。此图也解释了硬链接的同步更新，对源文件修改，操作系统只认i节点，于是操作系统就将修改内容写进所有i节点相同名字不同的文件。
>4. ==不允许给目录创建硬链接==
>5. 等于cp -p命令加上同步更新

## 硬链接与软链接的区别与联系
> [!note] 是否可以对目录进行链接
> 1. 软链接可以对目录进行链接
> 2. 硬链接不可以对目录进行链接

>[!note] 与源文件的inode是否相同，是否指向同一个数据块
>1. 软链接:inode不相同，指向同一个数据块
>2. 硬链接:inode相同,指向不同的数据块

> [!note] 与源文件的创建时间、大小
> 1. 软链接：大小和创建时间与源文件不同，不是源文件的内容
> 2. 硬链接：与源文件的大小、创建时间、内容都一样

> [!summary] 对源文件修改，链接文件是否同步更新
> 1. 软件链接：无变化。且文件大小不变
> 2. 硬链接：相当于:[cp -p]+同步更新。文件大小同步变化

>[!aabstract] 删除源文件后，软硬链接的状态
>1. 软链接：存在，依旧可以访问之前的文件内容
>2. 硬链接：存在，无法访问之前的文件内容

### 案例演示
>[!abstract] 
>在linux系统中，每个文件都会默认创建一个硬链接，文件本身被视为一个硬连接


![[Pasted image 20230829095841.png]]

删除文件后的情况
![[Pasted image 20230829095926.png]]

## history指令
查看已经执行过历史命令,也可以执行历史指令
1. 基本语法：history [选项]（功能描述：查看已经执行过历史命令）
2. history n:显示最近使用过的n个指令
![[Pasted image 20230721154227.png]]
## date与cal
### date 
基本用法如下
1. date （功能描述：显示当前时间） 
2. date +%Y （功能描述：显示当前年份） 
3. date +%m （功能描述：显示当前月份） 
4. date +%d （功能描述：显示当前是哪一天） (`如果是M，则显示日/月/年`)
5. date "+%Y-%m-%d %H:%M:%S"（功能描述：显示年月日时分秒）
* 注意点
1. “+%Y”是一个整体，不要拆开，date与“+%Y...”之间要有>=1个空格
2.  date "+%Y-%m-%d %H:%M:%S"：必须要有一个加号，同时“-“和”：“符号可以更改替换
![[Pasted image 20230721193550.png]]


手动设置日期
date -s 字符串时间
![[Pasted image 20230721194717.png]]

### cal
查看日历
cal [选项]，不加选项则显示本月日历
- `m`：按月份显示日历，默认情况下按周显示。
- `-y`：按年份显示日历。
![[Pasted image 20230721195430.png]]
# 搜索查找类
## find
find 指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端。
基本语法：find 搜索范围 [选项]
选项说明
* -name:按照指定的文件名查找文件
* -user:查找属于指定用户名的所有文件
* -size:按照指定的文件大小查找文件，（+n 大于 -n 小于n 等于）如查找大于20M的文件，可输入为+20M
案例1：按照指定的文件名查找文件
![[Pasted image 20230721201032.png]]
![[Pasted image 20230721201050.png]]
案例2：按拥有者
案例3：按文件大小
![[Pasted image 20230721201611.png]]
## locate
* locate 指令可以快速定位文件路径。locate 指令利用事先建立的系统中所有文件名称及路径的locate 数据库实现快速定位给定的文件。Locate 指令无需遍历整个文件系统，查询速度较快。为了保证查询结果的准确度，管理员必须定期更新 locate 时刻。
* 基本语法：locate 文件名
* 由于 locate 指令基于数据库进行查询，所以第一次运行前，必须使用updatedb 指令创建locate数据库。
![[Pasted image 20230721203924.png]]
## grep和管道符号“|”
* grep：过滤查找
* 管道符，“|”，表示将前一个命令的处理结果输出传递给后面的命令处理。==（使前面命令的输出作为后面命令的输入）==
* 基本语法：grep [选项] 查找内容 源文件
* 选项
	* -n:显示行号
	* -i：忽略字母大小写
案例1：在单个文件中查找指定字符串
![[Pasted image 20230721205743.png]]
案例2：利用管道
![[Pasted image 20230721205905.png]]
# 压缩与解压缩
## gzip/gunzip指令
gzip用于压缩文件，gunzip用于==解压缩文件，不能解压缩目录==
* gzip 文件 （功能描述：压缩文件，只能将文件压缩为*.gz 文件）
* gunzip 文件.gz （功能描述：解压缩文件命令）
* ==当我们使用 gzip 对文件进行压缩后，不会保留原来的文件。==
>[!note] 
>gizp不能压缩目录，常常和tar结合使用，tar负责打包文件，但是不压缩，gzip负责压缩打包后的文件



![[Pasted image 20230721210521.png]]
## zip/unzip
* zip  目标文件 要压缩的内容（功能描述：==可以压缩文件和目录的命令==）
> 这里的目标文件名可以不用加.zip
* unzip  要压缩的文件 （功能描述：解压缩文件）
* zip常用选项
	* -r：递归压缩，即压缩目录，压缩单个文件时不需要
* unzip常用选项
	* -d<目录> ：指定解压后文件的存放目录:==zip -d 存放压缩后文件的目录 源压缩文件==
![[Pasted image 20230721211753.png]]

![[Pasted image 20230721211811.png]]


![[Pasted image 20230721211842.png]]

![[Pasted image 20230721211923.png]]

## tar
* tar 指令 是打包指令，==打包并压缩后(-zcvf)==的文件是 .tar.gz 的文件，==只用“-cvf”打包就是.tar==
* 打包与解包，都是tar ，但是一个是zcvf，一个是zxvf，==解压到其他目录时一定要加“-C”==
* tar [选项] XXX.tar.gz / tar 打包的内容 (功能描述：==打包目录==，压缩后的文件格式.tar.gz)
* 选项
	* -c:产生.tar打包文件
	* -v:显示详细信息
	* -f:指定压缩后的文件名
	* -z:打包同时压缩
	* -x:解包.tar文件
案例1：压缩多个文件，将同一个目录下的多个文件进行压缩
![[Pasted image 20230721231313.png]]

案例2：压缩一整个目录下的所有文件
![[Pasted image 20230721232144.png]]

![[Pasted image 20230721232224.png]]

==说明你在那个目录下执行的tar，他就会保存在那个目录==

案例3：解压到当前目录
![[Pasted image 20230721232919.png]]

案例4：解压到其他目录
==tar -zxvf ab.tar.gz   -C   /home/mudi/==
解压可以指定目录，
![[Pasted image 20230721233826.png]]
==一定要有-C,否则会出错==
## 三者区别与联系
1. gzip：

- gzip 命令用于压缩单个文件。
* 压缩后不保留源文件
* 不使用参数

2. zip：

- zip 命令用于打包多个文件和目录。
- 压缩后保留源文件

3. tar：

- tar 命令用于打包多个文件和目录。
- 打包/打包压缩后保留源文件

## 其他压缩解压的命令
bzip，xz